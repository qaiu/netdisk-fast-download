# Monaco Editor NPMåŒ…é…ç½®è¯´æ˜

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. NPMåŒ…å®‰è£…
å·²åœ¨ `package.json` ä¸­å®‰è£…ï¼š
- `monaco-editor`: ^0.55.1 - Monaco Editoræ ¸å¿ƒåŒ…
- `@monaco-editor/loader`: ^1.4.0 - Monaco EditoråŠ è½½å™¨
- `monaco-editor-webpack-plugin`: ^7.1.1 - Webpackæ‰“åŒ…æ’ä»¶ï¼ˆdevDependenciesï¼‰

### 2. Webpacké…ç½®
åœ¨ `vue.config.js` ä¸­å·²é…ç½®ï¼š
```javascript
new MonacoEditorPlugin({
  languages: ['javascript', 'typescript', 'json'],
  features: ['coreCommands', 'find'],
  publicPath: process.env.NODE_ENV === 'production' ? './' : '/'
})
```

### 3. ç»„ä»¶é…ç½®
åœ¨ `MonacoEditor.vue` å’Œ `Playground.vue` ä¸­å·²é…ç½®ï¼š
```javascript
// é…ç½®loaderä½¿ç”¨æœ¬åœ°æ‰“åŒ…çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯CDN
if (loader.config) {
  const vsPath = process.env.NODE_ENV === 'production' 
    ? './js/vs'  // ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç›¸å¯¹è·¯å¾„
    : '/js/vs';  // å¼€å‘ç¯å¢ƒä½¿ç”¨ç»å¯¹è·¯å¾„
  
  loader.config({ 
    paths: { 
      vs: vsPath
    }
  });
}
```

---

## ğŸ” å·¥ä½œåŸç†

### æ‰“åŒ…æµç¨‹
1. `monaco-editor-webpack-plugin` åœ¨æ„å»ºæ—¶å°† Monaco Editor æ–‡ä»¶æ‰“åŒ…åˆ° `js/vs/` ç›®å½•
2. `@monaco-editor/loader` é€šè¿‡é…ç½®çš„è·¯å¾„åŠ è½½æœ¬åœ°æ–‡ä»¶
3. ä¸å†ä» CDNï¼ˆå¦‚ `https://cdn.jsdelivr.net`ï¼‰åŠ è½½

### æ–‡ä»¶ç»“æ„ï¼ˆæ„å»ºåï¼‰
```
nfd-front/
  â”œâ”€â”€ js/
  â”‚   â””â”€â”€ vs/
  â”‚       â”œâ”€â”€ editor/
  â”‚       â”œâ”€â”€ loader/
  â”‚       â”œâ”€â”€ base/
  â”‚       â””â”€â”€ ...
  â””â”€â”€ index.html
```

---

## ğŸ§ª éªŒè¯æ–¹æ³•

### 1. æ£€æŸ¥ç½‘ç»œè¯·æ±‚
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Networkæ ‡ç­¾ï¼š
- âœ… åº”è¯¥çœ‹åˆ°è¯·æ±‚ `/js/vs/...` æˆ– `./js/vs/...`
- âŒ ä¸åº”è¯¥çœ‹åˆ°è¯·æ±‚ `cdn.jsdelivr.net` æˆ–å…¶ä»–CDNåŸŸå

### 2. æ£€æŸ¥æ„å»ºäº§ç‰©
```bash
cd web-front
npm run build
ls -la nfd-front/js/vs/
```
åº”è¯¥çœ‹åˆ° Monaco Editor çš„æ–‡ä»¶è¢«æ‰“åŒ…åˆ°æœ¬åœ°ã€‚

### 3. ç¦»çº¿æµ‹è¯•
1. æ–­å¼€ç½‘ç»œè¿æ¥
2. è®¿é—® Playground é¡µé¢
3. âœ… ç¼–è¾‘å™¨åº”è¯¥æ­£å¸¸åŠ è½½ï¼ˆå› ä¸ºä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼‰
4. âŒ å¦‚æœä½¿ç”¨CDNï¼Œç¼–è¾‘å™¨ä¼šåŠ è½½å¤±è´¥

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

1. âœ… `web-front/src/components/MonacoEditor.vue`
   - æ·»åŠ äº† `loader.config()` é…ç½®ï¼Œæ˜ç¡®ä½¿ç”¨æœ¬åœ°è·¯å¾„

2. âœ… `web-front/src/views/Playground.vue`
   - åœ¨ `initMonacoTypes()` ä¸­æ·»åŠ äº†ç›¸åŒçš„é…ç½®

3. âœ… `web-front/vue.config.js`
   - æ·»åŠ äº† `publicPath` é…ç½®ï¼Œç¡®ä¿è·¯å¾„æ­£ç¡®

---

## ğŸš€ éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
```bash
cd web-front
npm install  # ç¡®ä¿ä¾èµ–å·²å®‰è£…
npm run serve
```
è®¿é—® `http://127.0.0.1:6444/playground`ï¼Œç¼–è¾‘å™¨åº”è¯¥ä»æœ¬åœ°åŠ è½½ã€‚

### ç”Ÿäº§ç¯å¢ƒ
```bash
cd web-front
npm run build
```
æ„å»ºåï¼ŒMonaco Editor æ–‡ä»¶ä¼šæ‰“åŒ…åˆ° `nfd-front/js/vs/` ç›®å½•ã€‚

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ–‡ä»¶å¤§å°
Monaco Editor æ‰“åŒ…åä¼šå¢åŠ æ„å»ºäº§ç‰©å¤§å°ï¼ˆçº¦2-3MBï¼‰ï¼Œä½†è¿™æ˜¯æ­£å¸¸çš„ã€‚

### 2. é¦–æ¬¡åŠ è½½
- å¼€å‘ç¯å¢ƒï¼šæ–‡ä»¶ä» webpack dev server åŠ è½½
- ç”Ÿäº§ç¯å¢ƒï¼šæ–‡ä»¶ä»æœ¬åœ° `js/vs/` ç›®å½•åŠ è½½

### 3. ç¼“å­˜
æµè§ˆå™¨ä¼šç¼“å­˜ Monaco Editor æ–‡ä»¶ï¼Œæ›´æ–°åå¯èƒ½éœ€è¦æ¸…é™¤ç¼“å­˜ã€‚

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šç¼–è¾‘å™¨æ— æ³•åŠ è½½
**æ£€æŸ¥**ï¼š
1. ç¡®è®¤ `npm install` å·²æ‰§è¡Œ
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
3. æ£€æŸ¥ Network æ ‡ç­¾ï¼Œç¡®è®¤æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

### é—®é¢˜ï¼šä»ç„¶ä»CDNåŠ è½½
**è§£å†³**ï¼š
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. ç¡®è®¤ `loader.config()` å·²æ­£ç¡®é…ç½®
3. æ£€æŸ¥ `vue.config.js` ä¸­çš„ `publicPath` é…ç½®

### é—®é¢˜ï¼šæ„å»ºåè·¯å¾„é”™è¯¯
**è§£å†³**ï¼š
- æ£€æŸ¥ `publicPath` é…ç½®
- ç¡®è®¤ç”Ÿäº§ç¯å¢ƒçš„ç›¸å¯¹è·¯å¾„ `./js/vs` æ­£ç¡®

---

## âœ… ä¼˜åŠ¿

1. **ç¦»çº¿å¯ç”¨** - ä¸ä¾èµ–å¤–éƒ¨CDN
2. **åŠ è½½é€Ÿåº¦** - æœ¬åœ°æ–‡ä»¶é€šå¸¸æ¯”CDNæ›´å¿«
3. **ç‰ˆæœ¬æ§åˆ¶** - ä½¿ç”¨å›ºå®šç‰ˆæœ¬çš„Monaco Editor
4. **å®‰å…¨æ€§** - ä¸ä¾èµ–ç¬¬ä¸‰æ–¹CDNæœåŠ¡
5. **ç¨³å®šæ€§** - CDNæ•…éšœä¸å½±å“ä½¿ç”¨

---

**é…ç½®çŠ¶æ€**: âœ… å·²å®Œæˆ  
**éªŒè¯çŠ¶æ€**: âš ï¸ å¾…æµ‹è¯•  
**å»ºè®®**: è¿è¡Œ `npm run build` å¹¶æ£€æŸ¥æ„å»ºäº§ç‰©













